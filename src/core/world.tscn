[gd_scene load_steps=18 format=2]

[ext_resource path="res://src/player/santa_player.tscn" type="PackedScene" id=1]
[ext_resource path="res://src/core/rail.gd" type="Script" id=2]
[ext_resource path="res://src/enemy/house.tscn" type="PackedScene" id=3]
[ext_resource path="res://src/ui/cozy_meter.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/terrain/terrain.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/graphics/textures/sky.png" type="Texture" id=6]
[ext_resource path="res://assets/graphics/textures/crosshair.png" type="Texture" id=7]
[ext_resource path="res://assets/graphics/textures/hitmarker.png" type="Texture" id=8]
[ext_resource path="res://src/core/hitmarker.gd" type="Script" id=9]
[ext_resource path="res://src/core/audio_player.gd" type="Script" id=10]
[ext_resource path="res://src/core/world.gd" type="Script" id=11]
[ext_resource path="res://assets/audio/voice/yohoho merry christmas.ogg" type="AudioStream" id=12]
[ext_resource path="res://assets/audio/music/Djengle Bells.ogg" type="AudioStream" id=13]

[sub_resource type="Curve3D" id=1]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, -15.7433, 28.7779, -9.67592, 0, 0, 0, 0, 0, 0, 6.96771, 11.8935, -11.3108, 0, 0, 0, 0, 0, 0, -0.111205, 24.9712, -42.6854, 0, 0, 0, 0, 0, 0, 3.19479, 14.9782, -59.8755, 0, 0, 0, 0, 0, 0, 8.28101, 15.8898, -91.6762, 0, 0, 0, 0, 0, 0, 14.5407, 21.0682, -112.739, 0, 0, 0, 0, 0, 0, -14.5546, 20.3114, -101.361, 0, 0, 0, 0, 0, 0, -38.0447, 23.4343, -100.299, 0, 0, 0, 0, 0, 0, -64.2818, 18.452, -107.364, 0, 0, 0, 0, 0, 0, -97.0988, 8.13074, -110.04, 0, 0, 0, 0, 0, 0, -123.425, 4.15815, -107.565, 0, 0, 0, 0, 0, 0, -141.063, 10.5682, -108.295, 0, 0, 0, 0, 0, 0, -157.917, 4.91702, -87.8775, 0, 0, 0, 0, 0, 0, -151.109, 10.5986, -71.172, 0, 0, 0, 0, 0, 0, -123.788, 8.36093, -67.8674, 0, 0, 0, 0, 0, 0, -89.8825, 5.85063, -76.3528, 0, 0, 0, 0, 0, 0, -58.018, 3.93413, -56.9175, 0, 0, 0, 0, 0, 0, -44.7136, 9.5569, -35.8593, 0, 0, 0, 0, 0, 0, -36.9398, 7.64929, -16.7295, 0, 0, 0, 0, 0, 0, -45.874, 7.14315, 3.08167, 0, 0, 0, 0, 0, 0, -52.587, 4.78934, 19.1395, 0, 0, 0, 0, 0, 0, -63.7351, 4.80644, 34.9964, 0, 0, 0, 0, 0, 0, -65.094, 3.15489, 45.508, 0, 0, 0, 0, 0, 0, -50.6775, 12.1518, 59.2035, 0, 0, 0, 0, 0, 0, -48.7432, 34.8507, 98.4749, 0, 0, 0, 0, 0, 0, -63.5247, 36.0917, 122.991, 0, 0, 0, 0, 0, 0, -116.695, 44.5556, 116.801, 0, 0, 0, 0, 0, 0, -106.362, 52.4202, 91.8704, 0, 0, 0, 0, 0, 0, -66.2997, 61.2973, 104.312, 0, 0, 0, 0, 0, 0, -14.9133, 44.5803, 85.52, 0, 0, 0, 0, 0, 0, -1.45927, 29.8964, 92.6824, 0, 0, 0, 0, 0, 0, 21.7264, 15.793, 89.3283, 0, 0, 0, 0, 0, 0, 40.9315, 1.15233, 82.9045, 0, 0, 0, 0, 0, 0, 68.0681, 1.58655, 77.6375, 0, 0, 0, 0, 0, 0, 60.0715, 0.699564, 92.5976, 0, 0, 0, 0, 0, 0, 77.3658, 1.84258, 108.461, 0, 0, 0, 0, 0, 0, 92.2518, 0.78244, 123.796, 0, 0, 0, 0, 0, 0, 111.659, 0.0201111, 126.432, 0, 0, 0, 0, 0, 0, 139.933, 0.0201111, 121.027, 0, 0, 0, 0, 0, 0, 171.118, 0.0201111, 103.979, 0, 0, 0, 0, 0, 0, 172.365, 0.0201111, 79.8625, 0, 0, 0, 0, 0, 0, 174.353, 0.0201111, 48.1454, 0, 0, 0, 0, 0, 0, 181.977, 0.0201111, 15.8913, 0, 0, 0, 0, 0, 0, 206.607, 0.0201111, -35.1288, 0, 0, 0, 0, 0, 0, 211.557, 0.0201111, -64.9683, 0, 0, 0, 0, 0, 0, 206.567, 0.0201111, -88.8525, 0, 0, 0, 0, 0, 0, 188.029, 0.0201111, -101.329, 0, 0, 0, 0, 0, 0, 163.076, 0.0201111, -107.746, 0, 0, 0, 0, 0, 0, 136.696, 0.0201111, -114.876, 0, 0, 0, 0, 0, 0, 115.664, 0.0201111, -107.746, 0, 0, 0, 0, 0, 0, 108.338, -0.993675, -94.3515, 0, 0, 0, 0, 0, 0, 120.654, 0.0201111, -82.4359, 0, 0, 0, 0, 0, 0, 134.201, 0.0201111, -67.1071, 0, 0, 0, 0, 0, 0, 123.863, 0.0201111, -49.996, 0, 0, 0, 0, 0, 0, 110.411, 0.0201111, -32.8193, 0, 0, 0, 0, 0, 0, 101.679, 0.0201111, -12.8609, 0, 0, 0, 0, 0, 0, 93.1237, 0.0201111, 3.98772, 0, 0, 0, 0, 0, 0, 87.6225, 0.0201111, 14.0734, 0, 0, 0, 0, 0, 0, 77.5368, 0.0201111, 0.320218, 0, 0, 0, 0, 0, 0, 72.2728, 3.52973, -17.8758, 0, 0, 0, 0, 0, 0, 64.0182, 11.0843, -10.7483, 0, 0, 0, 0, 0, 0, 48.4259, 11.6083, -19.1156, 0, 0, 0, 0, 0, 0, 29.9011, 7.51306, -20.9289, 0, 0, 0, 0, 0, 0, 4.83606, 19.4036, 36.3871, 0, 0, 0, 0, 0, 0, -12.1937, 20.6382, 47.2398, 0, 0, 0, 0, 0, 0, -25.7984, 34.9129, 52.7812, 0, 0, 0, 0, 0, 0, -45.0707, 62.7329, 38.1771, 0, 0, 0, 0, 0, 0, -40.0085, 60.2052, -9.12665 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="NavigationMesh" id=3]

[sub_resource type="PanoramaSky" id=5]
panorama = ExtResource( 6 )

[sub_resource type="Environment" id=4]
background_mode = 2
background_sky = SubResource( 5 )
fog_enabled = true
fog_color = Color( 0.615686, 0.603922, 0.611765, 1 )
fog_sun_color = Color( 0.85098, 0.811765, 0.733333, 1 )
fog_sun_amount = 1.0
fog_depth_end = 439.9
fog_transmit_enabled = true
fog_height_min = 1.0
fog_height_max = 8.0
tonemap_mode = 3
tonemap_exposure = 0.8

[node name="World" type="Node" groups=["world"]]
script = ExtResource( 11 )

[node name="terrain" parent="." instance=ExtResource( 5 )]
collision_layer = 0
collision_mask = 0
max_terrain_height = 2.5

[node name="Navigation" type="Navigation" parent="." groups=["navigation"]]

[node name="Path" type="Path" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 7.96011, -2.45058, -16.5877 )
curve = SubResource( 1 )

[node name="Rail" type="PathFollow" parent="Navigation/Path"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -15.7433, 28.7779, -9.67592 )
rotation_mode = 0
script = ExtResource( 2 )

[node name="Santa" parent="Navigation/Path/Rail" instance=ExtResource( 1 )]

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 3 )

[node name="House" parent="Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 35.6392, 0.0524254, -75.1197 )

[node name="House3" parent="Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 0.0263689, 0, -0.999652, 0, 1, 0, 0.999652, 0, 0.0263689, -135.814, 2.28882e-05, -104.77 )

[node name="House2" parent="Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -34.945, 1.52588e-05, -114.424 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 76.5628, 1.17394 )
light_color = Color( 0.843137, 0.843137, 0.843137, 1 )
directional_shadow_mode = 1

[node name="GUI" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CozyMeter" parent="GUI" instance=ExtResource( 4 )]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -148.0
margin_top = -204.0
margin_right = 148.0
margin_bottom = 0.0

[node name="Crosshair" type="TextureRect" parent="GUI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -32.0
margin_top = -32.0
margin_right = 32.0
margin_bottom = 32.0
rect_scale = Vector2( 0.5, 0.5 )
rect_pivot_offset = Vector2( 32, 32 )
texture = ExtResource( 7 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Hitmarker" type="TextureRect" parent="GUI"]
visible = false
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -32.0
margin_top = -32.0
margin_right = 32.0
margin_bottom = 32.0
rect_scale = Vector2( 0.5, 0.5 )
rect_pivot_offset = Vector2( 32, 32 )
texture = ExtResource( 8 )
script = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="GUI/Hitmarker"]
wait_time = 0.5
one_shot = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 4 )

[node name="AudioPlayer" type="Node" parent="."]
script = ExtResource( 10 )

[node name="VoicePlayer" type="AudioStreamPlayer" parent="AudioPlayer"]
stream = ExtResource( 12 )
volume_db = -2.972
bus = "Voice"

[node name="MusicPlayer" type="AudioStreamPlayer" parent="AudioPlayer"]
stream = ExtResource( 13 )
volume_db = -6.537
bus = "Music"

[connection signal="timeout" from="GUI/Hitmarker/Timer" to="GUI/Hitmarker" method="_on_Timer_timeout"]
