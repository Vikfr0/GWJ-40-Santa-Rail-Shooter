[gd_scene load_steps=15 format=2]

[ext_resource path="res://src/player/santa_player.tscn" type="PackedScene" id=1]
[ext_resource path="res://src/core/rail.gd" type="Script" id=2]
[ext_resource path="res://src/enemy/house.tscn" type="PackedScene" id=3]
[ext_resource path="res://src/ui/cozy_meter.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/terrain/terrain.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/graphics/textures/sky.png" type="Texture" id=6]
[ext_resource path="res://assets/graphics/textures/crosshair.png" type="Texture" id=7]
[ext_resource path="res://assets/graphics/textures/hitmarker.png" type="Texture" id=8]
[ext_resource path="res://src/core/hitmarker.gd" type="Script" id=9]

[sub_resource type="Curve3D" id=1]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, 0.371238, -0.345673, -1.33958, 0, 0, 0, 0, 0, 0, 0.367442, 0, -1.31259, 0, 0, 0, 0, 0, 0, 1.4715, 0.00569153, -22.4243, 0, 0, 0, 0, 0, 0, 1.88731, 0.0201111, -44.0459, 0, 0, 0, 0, 0, 0, 4.8724, 0.0201111, -65.0372, 0, 0, 0, 0, 0, 0, 6.63174, 0.0201111, -86.149, 0, 0, 0, 0, 0, 0, -5.68345, 0.0201111, -98.4642, 0, 0, 0, 0, 0, 0, -28.6463, 0.0201111, -103.468, 0, 0, 0, 0, 0, 0, -53.7852, 0.0201111, -104.473, 0, 0, 0, 0, 0, 0, -92.499, 0.0201111, -105.982, 0, 0, 0, 0, 0, 0, -123.671, 0.0201111, -104.473, 0, 0, 0, 0, 0, 0, -154.843, 0.0201111, -103.468, 0, 0, 0, 0, 0, 0, -160.691, 0.0201111, -90.1997, 0, 0, 0, 0, 0, 0, -153.335, 0.0201111, -77.8263, 0, 0, 0, 0, 0, 0, -129.704, 0.0201111, -67.268, 0, 0, 0, 0, 0, 0, -89.4823, 0.0201111, -75.3124, 0, 0, 0, 0, 0, 0, -51.774, 0.0201111, -71.2902, 0, 0, 0, 0, 0, 0, -40.2102, 0.0201111, -40.118, 0, 0, 0, 0, 0, 0, -40.2102, 0.0201111, -16.9903, 0, 0, 0, 0, 0, 0, -46.2435, 0.0201111, 6.64024, 0, 0, 0, 0, 0, 0, -54.7907, 0.0201111, 20.2152, 0, 0, 0, 0, 0, 0, -67.8629, 0.0201111, 34.7958, 0, 0, 0, 0, 0, 0, -66.7197, 0.360809, 44.9353, 0, 0, 0, 0, 0, 0, -58.4569, 0.18129, 56.2311, 0, 0, 0, 0, 0, 0, -66.3039, 0.335831, 67.3885, 0, 0, 0, 0, 0, 0, -80.8569, 0.345428, 75.7045, 0, 0, 0, 0, 0, 0, -116.2, 2.23981, 80.2783, 0, 0, 0, 0, 0, 0, -143.026, 5.8613, 106.343, 0, 0, 0, 0, 0, 0, -105.348, 1.30238, 110.923, 0, 0, 0, 0, 0, 0, -59.7265, 1.32292, 114.759, 0, 0, 0, 0, 0, 0, -30.4812, 1.55951, 111.345, 0, 0, 0, 0, 0, 0, 10.5752, 0.157486, 101.523, 0, 0, 0, 0, 0, 0, 40.9315, 1.15233, 82.9045, 0, 0, 0, 0, 0, 0, 68.0681, 1.58655, 77.6375, 0, 0, 0, 0, 0, 0, 60.0715, 0.699564, 92.5976, 0, 0, 0, 0, 0, 0, 77.3658, 1.84258, 108.461, 0, 0, 0, 0, 0, 0, 92.2518, 0.78244, 123.796, 0, 0, 0, 0, 0, 0, 111.659, 0.0201111, 126.432, 0, 0, 0, 0, 0, 0, 139.933, 0.0201111, 121.027, 0, 0, 0, 0, 0, 0, 171.118, 0.0201111, 103.979, 0, 0, 0, 0, 0, 0, 172.365, 0.0201111, 79.8625, 0, 0, 0, 0, 0, 0, 174.353, 0.0201111, 48.1454, 0, 0, 0, 0, 0, 0, 181.977, 0.0201111, 15.8913, 0, 0, 0, 0, 0, 0, 206.607, 0.0201111, -35.1288, 0, 0, 0, 0, 0, 0, 211.557, 0.0201111, -64.9683, 0, 0, 0, 0, 0, 0, 206.567, 0.0201111, -88.8525, 0, 0, 0, 0, 0, 0, 188.029, 0.0201111, -101.329, 0, 0, 0, 0, 0, 0, 163.076, 0.0201111, -107.746, 0, 0, 0, 0, 0, 0, 136.696, 0.0201111, -114.876, 0, 0, 0, 0, 0, 0, 115.664, 0.0201111, -107.746, 0, 0, 0, 0, 0, 0, 108.338, -0.993675, -94.3515, 0, 0, 0, 0, 0, 0, 120.654, 0.0201111, -82.4359, 0, 0, 0, 0, 0, 0, 134.201, 0.0201111, -67.1071, 0, 0, 0, 0, 0, 0, 123.863, 0.0201111, -49.996, 0, 0, 0, 0, 0, 0, 110.411, 0.0201111, -32.8193, 0, 0, 0, 0, 0, 0, 101.679, 0.0201111, -12.8609, 0, 0, 0, 0, 0, 0, 93.1237, 0.0201111, 3.98772, 0, 0, 0, 0, 0, 0, 87.6225, 0.0201111, 14.0734, 0, 0, 0, 0, 0, 0, 77.5368, 0.0201111, 0.320218, 0, 0, 0, 0, 0, 0, 70.2018, 0.0201111, -15.8779, 0, 0, 0, 0, 0, 0, 60.6004, 0.0201111, -6.17492, 0, 0, 0, 0, 0, 0, 40.0587, 0.0201111, -11.6713, 0, 0, 0, 0, 0, 0, 20.7063, 0.0201111, -14.0171, 0, 0, 0, 0, 0, 0, 1.34417, 0.0201111, -2.8349, 0, 0, 0, 0, 0, 0, 0, 0.0201111, -0.0142708 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="GDScript" id=2]
script/source = "extends Path


func _ready() -> void:
	Input.set_mouse_mode(Input.MOUSE_MODE_CAPTURED)
"

[sub_resource type="NavigationMesh" id=3]

[sub_resource type="PanoramaSky" id=5]
panorama = ExtResource( 6 )

[sub_resource type="Environment" id=4]
background_mode = 2
background_sky = SubResource( 5 )
fog_enabled = true
fog_color = Color( 0.533333, 0.576471, 0.619608, 1 )
fog_sun_color = Color( 0.85098, 0.811765, 0.733333, 1 )
fog_depth_end = 439.9
fog_transmit_enabled = true
fog_height_enabled = true
fog_height_min = 1.0
fog_height_max = 8.0
tonemap_mode = 3
tonemap_exposure = 0.8

[node name="World" type="Node" groups=["world"]]

[node name="terrain" parent="." instance=ExtResource( 5 )]
collision_layer = 0
collision_mask = 0
max_terrain_height = 2.5

[node name="Navigation" type="Navigation" parent="." groups=["navigation"]]

[node name="Path" type="Path" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.24739, 0, -15.3846 )
curve = SubResource( 1 )
script = SubResource( 2 )

[node name="Rail" type="PathFollow" parent="Navigation/Path"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.371238, -0.345673, -1.33958 )
rotation_mode = 0
script = ExtResource( 2 )

[node name="Santa" parent="Navigation/Path/Rail" instance=ExtResource( 1 )]

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 3 )

[node name="House" parent="Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 14.9961, 7.62939e-06, -75.6318 )

[node name="House3" parent="Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 0.0263689, 0, -0.999652, 0, 1, 0, 0.999652, 0, 0.0263689, -135.814, 2.28882e-05, -104.77 )

[node name="House2" parent="Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -34.945, 1.52588e-05, -129.426 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 76.5628, 1.17394 )
light_color = Color( 0.843137, 0.843137, 0.843137, 1 )
directional_shadow_mode = 1

[node name="GUI" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CozyMeter" parent="GUI" instance=ExtResource( 4 )]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -148.0
margin_top = -204.0
margin_right = 148.0
margin_bottom = 0.0

[node name="Crosshair" type="TextureRect" parent="GUI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -32.0
margin_top = -32.0
margin_right = 32.0
margin_bottom = 32.0
rect_scale = Vector2( 0.5, 0.5 )
rect_pivot_offset = Vector2( 32, 32 )
texture = ExtResource( 7 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Hitmarker" type="TextureRect" parent="GUI"]
visible = false
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -32.0
margin_top = -32.0
margin_right = 32.0
margin_bottom = 32.0
rect_scale = Vector2( 0.5, 0.5 )
rect_pivot_offset = Vector2( 32, 32 )
texture = ExtResource( 8 )
script = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="GUI/Hitmarker"]
wait_time = 0.5
one_shot = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 4 )

[connection signal="timeout" from="GUI/Hitmarker/Timer" to="GUI/Hitmarker" method="_on_Timer_timeout"]
